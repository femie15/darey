# ANSIBLE

![apache](https://github.com/femie15/darey/blob/main/project11/archi.PNG)

### installation

From the continuation of project 10 (Multiple web servers, NGINX load balancer, Jenkins, NFS server and a database server)

We can also install our ansible on the same jenkins server (Rename the server to jenkins-ansible) and SSH into it. We then install ansible.

`sudo apt update`

`sudo apt install ansible`

After the installation is done, check your Ansible version by running `ansible --version`

then we go to our jenkins GUI and create a "new item" give it a name of "ansible" and select "free-style project" then click "ok"

in the next view, under the Source Code Management tab, click "git" and enter github https url for the ansible repository, then change the branch to "*/main".

under Build Triggers check the box "GitHub hook trigger for GITScm polling", then click "Post-build Actions" and select "Archive the artifacts" and in the  "Files to archive"
field enter "**" (save all files). Now click save to save the configuration then on the side navigation bar, click "Build now", The first build should be successful now,
You can go ahead to change the Readme.txt file on github and it should automatically build on jenkins.

make sure that builds starts automatically and Jenkins saves the files (build artifacts) in following folder
`ls /var/lib/jenkins/jobs/ansible/builds/<build_number>/archive/` (eg. `ls /var/lib/jenkins/jobs/ansible/builds/2/archive`)

Now we have the initial architechture (In the first image) setup.

### Note:

Every time you stop/start your Jenkins-Ansible server â€“ you have to reconfigure GitHub webhook to a new IP address, in order to avoid it, it makes sense to allocate an Elastic IP to your Jenkins-Ansible server (you have done it before to your LB server in Project 10). Note that Elastic IP is free only when it is being allocated to an EC2 Instance, so do not forget to release Elastic IP once you terminate your EC2 Instance.

## Dev environment using VS Code

Clone down your ansible-config-mgt repo to your Jenkins-Ansible instance

`git clone <ansible-config-mgt repo link>`



















